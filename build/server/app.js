"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const express_1 = (0, tslib_1.__importDefault)(require("express"));
const cors_1 = (0, tslib_1.__importDefault)(require("cors"));
require("express-async-errors");
const texts_1 = (0, tslib_1.__importDefault)(require("./routes/texts"));
const translations_1 = (0, tslib_1.__importDefault)(require("./routes/translations"));
const users_1 = (0, tslib_1.__importDefault)(require("./routes/users"));
const words_1 = (0, tslib_1.__importDefault)(require("./routes/words"));
const login_1 = (0, tslib_1.__importDefault)(require("./routes/login"));
const languages_1 = (0, tslib_1.__importDefault)(require("./routes/languages"));
const middleware_1 = require("./utils/middleware");
const errorHandlers_1 = require("./utils/errorHandlers");
const app = (0, express_1.default)();
app.use((0, cors_1.default)());
app.use(express_1.default.json());
app.use(express_1.default.static('build/client'));
app.use(middleware_1.extractToken);
app.use('/api/users', users_1.default);
app.use('/api/login', login_1.default);
app.use('/api/languages', languages_1.default);
app.use('/api/texts', middleware_1.getUserFromToken, texts_1.default);
app.use('/api/translations', middleware_1.getUserFromToken, translations_1.default);
app.use('/api/words', middleware_1.getUserFromToken, words_1.default);
app.use([errorHandlers_1.notFoundHandler, errorHandlers_1.generalErrorHandler]);
exports.default = app;
